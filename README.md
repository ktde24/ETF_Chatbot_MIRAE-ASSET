# 💹 ETF RAG 챗봇

> 🤖 **AI 기반 종합 ETF 투자 분석 시스템**  
> 995개 ETF 데이터로 **맞춤 추천 · 상세 분석 · 다각도 비교** 원스톱 서비스

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![Streamlit](https://img.shields.io/badge/Streamlit-1.28+-red.svg)](https://streamlit.io)
[![CLOVA](https://img.shields.io/badge/CLOVA-LLM-green.svg)](https://clova.ai)

---

## 🚀 빠른 시작

```bash
# 1. 설치
pip install -r requirements.txt

# 2. 환경변수 설정
echo "CLOVA_API_KEY=your_api_key_here" > .env

# 3. 캐시 생성 (최초 1회)
python scripts/precompute_etf_scores.py

# 4. 앱 실행
streamlit run app/main_app.py
```

## ✨ 핵심 기능

### 🎯 **1. 맞춤형 ETF 추천**
- **개인화 추천**: 16가지 투자성향 × 3단계 레벨별 맞춤 추천
- **카테고리 필터링**: 국내외, 테마, 섹터별 선별 추천
- **위험도 관리**: 레벨별 Risk Tier 자동 필터링으로 안전성 보장
- **실시간 랭킹**: 종합점수 기반 실시간 순위 제공

### 📊 **2. ETF 개별 분석**
- **종합 데이터 분석**: 시세, 수익률, 보수, 자산규모, 거래량 통합 분석
- **성과 지표**: 3개월/1년 수익률, 변동성, 최대낙폭, 샤프비율 계산
- **시각화**: 수익률 트렌드, 성과 지표 바차트, 공식 데이터 요약차트
- **위험 평가**: 5단계 변동성 등급

### ⚖️ **3. ETF 다각도 비교**
- **다중 비교**: 최대 6개 ETF 동시 비교 분석
- **6가지 시각화**: 점수 바차트, 위험-수익률 산점도, 레이더차트, 상관관계 히트맵, 수익률 비교, 비용 효율성
- **종합 순위**: 사용자별 맞춤 종합점수로 우선순위 결정
- **상세 비교표**: 핵심 지표 한눈에 비교

### 🤖 **4. 맞춤 설명**
- **레벨별 설명**: 초보자용 쉬운 설명부터 고급자용 전문 분석까지
- **투자 조언**: 개인 성향에 맞는 구체적 투자 전략 제시
- **자연어 대화**: 일상 언어로 복잡한 금융 데이터 해석

---

## 🏗️ 시스템 아키텍처

### 🎛️ **개인화 엔진**
```
사용자 프로필 → 위험도 필터링 → 성향별 가중치 → 맞춤 결과
```
- **투자 레벨**: Level 1 (초보), Level 2 (중급), Level 3 (고급)
- **위험 허용도**: 레벨별 Risk Tier 자동 필터링 (L1: 0-2, L2: 0-3, L3: 0-4)
- **투자 성향**: 16가지 세분화된 유형 (AITB, ARSB, IERE 등)

### 📈 **데이터 파이프라인**
```
원시 데이터 → 전처리 → 점수 계산 → 캐시 저장 → 실시간 서비스
```
- **실시간 시세**: 2년치 일별 데이터 (2023~2025)
- **공식 정보**: 수익률, 보수, 자산규모, 거래량
- **위험 지표**: 변동성, 최대낙폭 등
- **캐시 시스템**: 가능한 조합 사전 계산

---

## 🎯 사용법

### 💬 **1. ETF 추천 받기**
```
"IT ETF 3개 추천해줘"           → 카테고리별 맞춤 추천
"안전한 채권 ETF 찾아줘"        → 위험도 기반 추천  
"배당주 ETF 5개 보여줘"         → 테마별 추천
"미국 주식 ETF 추천"           → 지역별 추천
```

### 📊 **2. ETF 개별 분석**
```
"KODEX 200 분석해줘"           → 종합 분석 + 차트
"TIGER 미국나스닥100 어때?"     → 성과 지표 분석
"ARIRANG 중국본토 차트 보여줘"  → 시각화 분석  
```

### ⚖️ **3. ETF 비교 분석**
```
"KODEX 200 vs TIGER 200 비교"     → 2개 ETF 비교
"삼성 반도체, LG전자, SK하이닉스 비교" → 3개 ETF 비교
"배당 ETF들 비교해줘"              → 카테고리 내 비교
```

### 👤 **4. 사용자 설정**
- **사이드바에서 레벨 선택**: 투자 경험에 따른 3단계
- **투자성향 선택**: 16가지 세분화된 유형 중 선택
- **자동 필터링**: 선택한 레벨에 맞는 안전한 ETF만 노출

---

## 📊 시각화 및 분석

### 📈 **개별 분석 차트**
- **시세 분석 바차트**: 3개월/1년 수익률, 변동성, 최대낙폭
- **공식 데이터 바차트**: 보수, 자산규모, 거래량 등

### ⚖️ **비교 분석 차트**
- **종합점수 바차트**: 사용자별 맞춤 점수 순위
- **위험-수익률 산점도**: 리스크 대비 수익률 포지셔닝
- **레이더차트**: 수익률, 비용효율성, 유동성, 안정성, 규모 5차원 비교
- **상관관계 히트맵**: 주요 지표 간 상관관계 분석
- **수익률 비교차트**: 기간별 수익률 나란히 비교
- **비용-성과차트**: 총보수 대비 수익률 효율성 분석

---

## ⚙️ 고급 설정

<details>
<summary><b>🔧 캐시 및 데이터 관리</b></summary>

```bash
# 캐시 재생성 (새로운 데이터 반영)
python scripts/precompute_etf_scores.py

# 데이터 분포 분석
python scripts/etf_data_distribution_analysis.py

# 일별 시세 업데이트
python scripts/fetch_etf_daily.py
```
</details>

<details>
<summary><b>🎛️ 투자자 유형 커스터마이징</b></summary>

```python
# chatbot/config.py에서 새로운 투자성향 추가
INVESTOR_TYPE_WEIGHTS = {
    'CUSTOM': {
        '자동화': 0.3, '위험회피': 0.4, 
        '스토리중심': 0.2, '장기보유': 0.1
    }
}

# 새로운 레벨별 위험도 설정
USER_LEVEL_RISK_LIMITS = {
    4: 5  # Level 4 추가 시
}
```
</details>



---

<div align="center">



</div>
